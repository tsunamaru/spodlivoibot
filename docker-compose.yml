version: '3'

# Build: docker-compose run --rm gradle
# Run: docker-compose up -d spodlivoi
services:

    spodlivoi:
        image: spodlivoibot
        environment:
            TELEGRAM_BOT_TOKEN: 866647031:AAHgSWpqnTdST8bUmDTDtOnPfIeaLdH4_kE
            TELEGRAM_BOT_USERNAME: spodlivoi_bot
        build:
            dockerfile: ./Dockerfile
            context: .
        tty: true
        stdin_open: true
        # restart: always
        # network_mode: host
        depends_on:
            - db

    db:
        image: postgres:13-alpine
        environment:
            POSTGRES_PASSWORD: aiQuuo0eelaequohNooQuaa3mahShe
            POSTGRES_USER: spodlivoi
            POSTGRES_DB: spodlivoi
            PGDATA: /var/lib/postgresql/data/pgdata
        volumes:
          - spodlivoidb:/var/lib/postgresql/data/pgdata
        restart: always

volumes:
  spodlivoidb: